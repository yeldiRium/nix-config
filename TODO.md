# TODO

- ongoing darwin-induced restructure:
  - [ ] i have moved the previous hosts/common configs to hosts/common/linux. the linux hosts have not been adjusted yet and should all fail
  - [ ] move config files from hosts/ that do not directly concern hosts (i.e. everything under hosts/common) into nixos modules. this includes users
    - there should be three modules: common, linux and darwin. move everything first to linux, then start extracting to common and adding to darwin
    - each host should include: common/global, <platform>/global, and any desired common/optional/... and <platform>/optional/...
  - [ ] split hosts into darwin and linux folders
  - the same thing will probably be necessary for home manager. maybe that is cross-platform though? we'll see.
  - [ ] enable xdg.mimeApps only on linux

- bugs
  - [x] fix ugly hyprland cursor wtf
  - [ ] make regreet show up on main monitor

- legacy things
  - [ ] go over actual dotfiles in gitea and see what needs to be migrated
    - [x] taskwarrior settings
- system
  - adjust ricing to my liking
  - [x] overhaul desktop entries to only show what I need
  - [x] replace xdg-desktop-portal-wlr with xdg-desktop-portal-hyprland
  - [ ] convert keyring into module that 1.) installs and configures gnome keyring and 2.) adds it to the pam services
- apps
  - more tui
    - [ ] evaluate email client himalaya (https://github.com/pimalaya/himalaya)
    - [ ] evaluate email client mutt (http://www.mutt.org/)
  - development
    - [x] kubectl
    - [x] k9s
    - [x] minikube
    - [x] lazydocker
    - [x] qmk development and flash setup (install qmk cli, configure qmk home, run `qmk setup`)
  - cli
    - taskwarrior
      - [x] adjust settings to hackstack setup
    - neovim
      - [x] github copilot
      - [ ] highlight uses of hovered symbol
      - [ ] maybe indent entire editor based on screen size? I'd like to have my code more centered
      - [ ] key-analyzer.nvim
      - features
        - git
          - [x] add guides to git commit buffer at 50 and 72 characters
        - obsidian
          - [ ] add keybindings
          - [ ] add custom template substitutions until all of my templates work
          - [ ] maybe somehow support dataview? this might be a limitation
      - syntax highlighting
        - [ ] css
        - [ ] csv
        - [ ] desktop
        - [x] diff
        - [x] dockerfile
        - [ ] gitignore
        - [ ] helm?
        - [ ] html
        - [ ] make
        - [x] poe-filter
        - [ ] regex
        - [ ] scss
        - [ ] sh/bash
        - [ ] sql
        - [ ] ssh_config
        - [ ] terraform
        - [ ] toml
        - [ ] xml
        - [-] zsh (unfortunately no treesitter parser exists)
      - lsp
        - bindings
          - [-] go to/list implementations
        - [x] bashls
        - [ ] helm?
        - [ ] html
        - [ ] htmx
        - [ ] hledger (might do this myself)
        - [ ] terraformls
      - dap
          - [ ] javascript, typescript
  - desktop apps
    - [ ] audacity
    - [ ] clementine
    - [ ] gimp
    - [ ] transmission gui
    - office
      - mail
        - [ ] add missing accounts, but probably put them into sops so not all my e-mail account names are visible to the public
      - rss
        - [ ] manage RSS feeds in thunderbird by generating `feeds.json`. this might not work, since thunderbird wants to write the file
      - hledger
        - [x] check config against hackstack. strict checking does not seem to work
- fixes
  - [x] investigate startup script. deleting btrfs subvolumes seems to be broken
    - yep, it is, because my ssd seems to have corrupted sectors that btrfs can't handle. should not be a problem for other hosts
  - [ ] home manager switch: delete zsh_history file before starting service home-manager-yeldir
  - [x] still "too many open files" errors when starting games (e.g. kingdoms of amalur)
- security
  - [ ] look into full disk encryption (might require re-setup)
  - [ ] setup sops
    - [x] for user password
    - [ ] for ssh key
    - [ ] for gpg key
    - [-] for wifi network
  - backups with borg
    - [ ] configurable per host
    - [ ] with impermanence it's easy to just backup the entire /persist folder
- darwin
- modularity
  - [x] add options to disable animations and transparency in hyprland and wayland
  - [x] make impermanence optional
  - [ ] invert how support for programming languages is structured
    - instead of having language support distributed across many files (neovim lsp, treesitter, other installations), each programming language or development feature should have one module
    - this module contains configurations for all other programs (neovim, install additional things, shell integrations) depending on whether they are installed
  - [ ] make system target configurable between linux and darwin
    - [ ] use it to build the shell aliases for nbuild/nswitch/nrepl
  - [ ] rethink the "supported languages" support in my module options
    - The list becomes very long and clutters the config
    - I might want to cluster some languages, e.g. json/yaml/xml/csv because they are related, but they might have complicated setups

## Restructure development feature
- feature
  - editor integration
    - lsp software
    - neovim config
      - ftplugin (filetype specific settings)
      - treesitter plugin (syntax highlighting)
      - dap plugin (debugging)
      - lsp binding
      - neotest plugin (testing)
  - specific software
    - eg docker, kubectl
    - no interpreters or compilers, those should be installed via devbox with the project-specific version
    - scripts and aliases
  - shell integration
- what features are there?
  - go (highlighting, lsp, dap, test plugin)
  - lua (highlighting, lsp)
  - git (gitignore, gitconfig, gh)
  - shell (sh, bash, zsh)
  - web (typescript, javascript, html, css, scss)
  - docker (docker, lazydocker)
  - kubernetes (kubectl, k9s, helm)
  - minikube
  - config/data files (json, csv, xml, yaml, toml)
  - terraform (highlighting, lsp?, cli)
  - make (makefile highlighting & lsp?, make cli)
  - linux (desktop files)
  - regex
